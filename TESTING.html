<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Virtual Guitar Fretboard</title>
  <style>
    :root {
      --fret-color: #ccc;
      --string-color: #aaa;
      --note-bg: #112240;
      --note-text: #fff;
      --highlight-color: #D4AF37;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #0D1B2A;
      color: var(--note-text);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 30px;
      font-size: 1.6rem;
      color: var(--highlight-color);
    }

    .fretboard-wrapper {
      overflow-x: auto;
      width: 100%;
      max-width: 100vw;
    }

    .fretboard {
      display: grid;
      grid-template-columns: 60px repeat(24, 42px);
      grid-auto-rows: 40px;
      border: none;
      background: transparent;
    }

    .string-label {
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      background: #1A2B4C;
      color: var(--highlight-color);
    }

    .note-cell {
      border-left: 1px solid var(--fret-color);
      border-bottom: 2px solid var(--string-color);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--note-bg);
      color: var(--note-text);
      font-size: 0.85rem;
      font-weight: 600;
      position: relative;
    }

    .fret-marker {
      position: absolute;
      bottom: 3px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: var(--highlight-color);
    }

    select.tuning-select {
      width: 60px;
      background: #1A2B4C;
      color: white;
      border: none;
      padding: 5px;
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .note-cell {
        width: 36px;
        height: 36px;
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
  <h1>Virtual Guitar Fretboard</h1>
  <div class="fretboard-wrapper">
    <div class="fretboard" id="fretboard"></div>
  </div>

  <script>
    const ALL_NOTES = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const standardTuning = ['E', 'B', 'G', 'D', 'A', 'E'];
    const numFrets = 24;

    const fretboardEl = document.getElementById("fretboard");

    function createTuningSelect(stringIndex, defaultNote) {
      const select = document.createElement("select");
      select.className = "tuning-select";
      select.dataset.string = stringIndex;
      ALL_NOTES.forEach(note => {
        const opt = document.createElement("option");
        opt.value = note;
        opt.textContent = note;
        if (note === defaultNote) opt.selected = true;
        select.appendChild(opt);
      });
      select.addEventListener("change", renderFretboard);
      return select;
    }

    function getNoteAt(startNote, fret) {
      const startIndex = ALL_NOTES.indexOf(startNote);
      return ALL_NOTES[(startIndex + fret) % 12];
    }

    function renderFretboard() {
      fretboardEl.innerHTML = "";

      for (let string = 0; string < 6; string++) {
        const tuning = document.querySelector(`select[data-string='${string}']`);
        const tuningNote = tuning ? tuning.value : standardTuning[string];

        // Add tuning selector (only one per string)
        const tuningSelect = createTuningSelect(string, tuningNote);
        fretboardEl.appendChild(tuningSelect);

        for (let fret = 0; fret <= numFrets; fret++) {
          const cell = document.createElement("div");
          cell.className = "note-cell";

          const note = getNoteAt(tuningNote, fret);
          cell.textContent = note;

          // Add fret marker
          if (string === 2 && [3, 5, 7, 9, 12, 15, 17, 19, 21, 24].includes(fret)) {
            const dot = document.createElement("div");
            dot.className = "fret-marker";
            dot.textContent = "â€¢";
            cell.appendChild(dot);
          }

          fretboardEl.appendChild(cell);
        }
      }
    }

    renderFretboard();
  </script>
</body>
</html>
