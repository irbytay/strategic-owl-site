<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strategic Owl | The Constitution</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />

  <style>
  :root {
    --background: #0D1B2A;
    --surface: #112240;
    --highlight: #1A2B4C;
    --truth: #28A745;
    --reliability: #3B6CED;
    --understanding: #D4AF37;
    --text: #FFFFFF;
    --text-muted: #7C8A9B;
    --heading: #FFFFF0;
    --shadow: rgba(0, 0, 0, 0.3);
    --bar-red: #FF4C4C;
    --bar-green: #28A745;
  }

  body {
    background-color: var(--background);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
  }

  /* 🧭 NAVBAR & MENU */
  nav.top-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background-color: var(--highlight);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px;  /* 🟡 Controls vertical height of navbar */
    box-shadow: 0 2px 6px var(--shadow);
  }

  .nav-title {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    color: var(--understanding);
  }

  .menu-toggle {
    display: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text);
    background: none;
    border: none;
  }

  .nav-links {
    display: flex;
    gap: 28px;
  }

  .nav-links a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 15px;
    transition: color 0.3s ease;
  }

  .nav-links a:hover {
    color: var(--understanding);
  }
    .nav-logo img {
  height: 40px;
  width: 40px;
}
    .nav-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  font-weight: 600;
  color: var(--text);
  font-size: 1.25rem;
}
    /* 🎨 TRU Bars */
  .divider-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 40px auto; /* 🟡 Adjust this to reduce space around the TRU bar (try 24px auto or 24px auto 12px) */
  }

  .divider-bar {
    display: flex;
    gap: 12px;
    width: 340px;
  }

  .divider-bar div {
    width: 108px;
    height: 6px;
    border-radius: 3px;
    box-shadow: 0 0 4px var(--shadow);
  }

  .truth { background-color: var(--truth); }
  .reliability { background-color: var(--reliability); }
  .understanding { background-color: var(--understanding); }

  .divider-labels {
    display: flex;
    justify-content: center;
    gap: 12px;
    width: 340px;
    margin-top: 8px;/* 🟡 Adjust this to pull labels closer to bars (try 4px if needed) */
  }

  .divider-labels span {
    width: 108px;
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .menu-toggle {
      display: block;
    }

    .nav-links {
      display: none;
      flex-direction: column;
      align-items: center;/* 👈 links side-by-side on mobile */
      justify-content: center;
      background-color: var(--highlight);
      position: absolute;
      top: 58px;
      left: 0;
      width: 100%;
      padding: 10px 0;
      gap: 20px;
      box-shadow: 0 3px 8px var(--shadow);
    }
    .nav-links a {
  padding: 10px 0;
  width: 100%;
  text-align: center;
  font-size: 1rem;
}

    .nav-links.show {
      display: flex;
      animation: fadeSlideDown 0.3s ease;
    }

    @keyframes fadeSlideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
    @media (max-width: 500px) {
  #legal-popup > div {
    padding: 12px;
    font-size: 0.95rem;
  }

  #accept-btn {
    width: 100%;
    font-size: 1rem;
  }

  p {
    font-size: 0.95rem;
    margin-bottom: 16px;/* 🟡 Mobile-specific paragraph margin */
  }
}

  /* ✅ YOUR ORIGINAL STYLES BELOW */
  .container {
    max-width: 960px;
    margin: 72px auto 0 auto; /* 🟡 Adjust this top margin to tighten space below nav (try 72px or 60px) */
    padding: 24px;
  }

  h1 {
    font-family: 'Playfair Display', serif;
    color: var(--heading);
    margin-bottom: 16px;
    text-align: center;
  }
  h2 {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  color: var(--understanding); /* golden highlight */
  font-weight: 600;
  margin-top: 32px; /* 🟡 Reduce this if h2 spacing feels too large (try 12px–20px) */
  margin-bottom: 12px;
  text-align: center;
}
  p {
  font-family: 'Inter', sans-serif;
  font-size: 1.05rem;
  color: var(--text-muted);
  line-height: 1.6;
  margin-bottom: 20px; /* 🟡 You can tighten this to 12px or 16px for stacked content */
  text-align: center;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}

  select {
    padding: 8px;
    margin-bottom: 16px;
    background-color: var(--surface);
    color: var(--text);
    border: 1px solid var(--highlight);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--surface);
    margin-top: 12px;
  }

  th, td {
    padding: 12px;
    border-bottom: 1px solid var(--highlight);
    text-align: left;
  }

  .text-truth { color: var(--truth); }
  .text-reliability { color: var(--reliability); }
  .text-understanding { color: var(--understanding); }

  .total-score {
    font-weight: bold;
  }

  .positive-score { color: var(--bar-green); }
  .negative-score { color: var(--bar-red); }

  .score-bar {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .bar-indicator {
    width: 10px;
    height: 24px;
    border-radius: 2px;
  }

  .bar-red {
    background-color: var(--bar-red);
  }

  .bar-green {
    background-color: var(--bar-green);
  }
    .match-nav-link {
  color: var(--text-muted);
  text-decoration: none;
  font-size: 15px;
  transition: color 0.3s ease;
}

.match-nav-link:hover {
  color: var(--understanding);
}
 /* 🦉 Strategic Owl Button Style */
.owl-button {
  background-color: var(--navy);            /* Deep base color */
  color: white;                             /* Clean readable text */
  font-weight: 600;                         /* Medium-bold */
  padding: 10px 18px;
  border: 1px solid var(--reliability);     /* Outline in reliability yellow */
  border-radius: 8px;
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  cursor: pointer;
  text-decoration: none;
  transition: 
    background-color 0.3s ease, 
    color 0.3s ease,
    box-shadow 0.3s ease;
}

.owl-button:hover {
  background-color: var(--reliability);     /* Hover color = yellow */
  color: var(--navy);                       /* Invert text color */
  box-shadow: 0 0 12px var(--reliability);  /* Glow on hover */
}
</style>

<nav class="top-nav">
<a href="TRUOWL3.html" class="nav-logo">
  <img src="owl_logo_white.png" alt="Owl Logo" onerror="this.style.display='none';" />
  <div class="nav-title">The Strategic Owl</div>
</a>
  <button class="menu-toggle" onclick="toggleMenu()">☰</button>
  <div class="nav-links" id="navMenu">
   <a href="Index.html">Home</a>
    <a href="TRUOWL3.html">T.R.U. Owl</a>
    <a href="newelections3.html">Election Security</a>
    <a href="the_constitution.html">The Constitution</a>
    <a href="newcontact3.html">Contact</a>
  </div>
</nav>
  <div class="container">
    <h1>Strategic grounding</h1>
<!-- 🎯 Divider -->
    <section class="divider-section">
      <div class="divider-bar">
        <div class="truth"></div>
        <div class="reliability"></div>
        <div class="understanding"></div>
      </div>
      <div class="divider-labels">
        <span>Truth</span>
        <span>Reliability</span>
        <span>Understanding</span>
      </div>
    </section>
 <!-- 🦉 Strategic Owl Radicalization Quiz -->
<div id="quiz-container" class="container">
  <h2 style="text-align: center; color: var(--understanding); font-family: 'Playfair Display', serif;">
    How Strategically Grounded Are You?
  </h2>

  <p style="text-align: center; max-width: 700px; margin: 0 auto 16px; color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 1rem;">
    This interactive tool helps assess your civic positioning — not your politics. It’s completely anonymous and your answers are stored nowhere.
  </p>

  <p style="text-align: center; max-width: 700px; margin: 0 auto 16px; color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 1rem;">
    Use the 0–10 scale on each question. <strong>0 = fully disagree</strong>, <strong>10 = fully agree</strong>. Just answer honestly. No right or wrong — only insight.
  </p>

  <p style="text-align: center; max-width: 700px; margin: 0 auto 30px; color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 1rem;">
    Don’t overthink it. Clear your mind and respond authentically. The goal is reflection, not performance.
  </p>

  <div id="quiz-question" style="margin-top: 40px; text-align: center;"></div>

  <div id="quiz-scale" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 20px 0;"></div>

  <!-- Inline narrative response area -->
  <div id="narrative-display" style="max-width: 600px; margin: 0 auto; padding: 20px; display: none; background-color: var(--surface); color: var(--text); border-left: 4px solid var(--reliability); border-radius: 8px; font-size: 1rem; font-family: 'Inter', sans-serif;"></div>

  <!-- "Next" button shown AFTER delay -->
  <button id="next-question" style="
    display: none;
    margin: 20px auto 0;
    background-color: var(--reliability);
    color: white;
    padding: 10px 24px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-family: 'Montserrat', sans-serif;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  ">
    Next Question →
  </button>

  <div id="quiz-result" style="margin-top: 40px;"></div>
</div>

<script>
const SHEET_ID = "19wBEj9hEkvIyQcoR5E_mBGVAxTzMnddMxk8nuQLAumA";
const API_KEY = "AIzaSyCzuh9HBfe0r70r9U35Pe406PPZ-tz6I78";
const RANGE = "TRUTest!C2:S100";

let quizData = [];
let currentIndex = 0;
let userScores = [];

async function fetchTRUData() {
  const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;
  const res = await fetch(url);
  const json = await res.json();
  return json.values.slice(1); // Skip header row (row 2)
}

function loadQuestion(index) {
  const [
    question,
    highNarrative,
    moderateNarrative,
    lowNarrative,
    weight,
    ...rest
  ] = quizData[index];

  const scoreRow = rest.slice(0, 11); // H–R
  const flipLogic = rest[11]?.toLowerCase() === 'false'; // S column

  const container = document.getElementById("quiz-question");
  const scale = document.getElementById("quiz-scale");
  const narrativeBox = document.getElementById("narrative-display");
  const nextBtn = document.getElementById("next-question");

  container.innerHTML = `<h2 style="text-align: center; color: var(--understanding); font-family: 'Playfair Display', serif;">${question}</h2>`;
  scale.innerHTML = "";
  narrativeBox.innerHTML = "";
  narrativeBox.style.display = "none";
  nextBtn.style.display = "none";

  for (let i = 0; i <= 10; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.className = "owl-button";

    btn.onclick = () => {
  const adjustedScore = flipLogic ? i : 10 - i;

  let narrative = moderateNarrative;
  if (adjustedScore <= 3) narrative = lowNarrative;
  else if (adjustedScore >= 8) narrative = highNarrative;

  userScores[currentIndex] = {
    score: adjustedScore,
    weight: parseFloat(weight),
    originalInput: i,
    question: question
  };

  narrativeBox.innerHTML = `<p style="margin-top: 20px; font-family: 'Inter', sans-serif; font-size: 1rem; color: var(--text);">${narrative}</p>`;
  narrativeBox.style.display = "block";

  nextBtn.style.display = "none";
  setTimeout(() => {
    nextBtn.style.display = "block";
  }, 3000);

  nextBtn.onclick = () => {
    narrativeBox.style.display = "none";
    nextBtn.style.display = "none";
    currentIndex++;
    if (currentIndex < quizData.length) {
      loadQuestion(currentIndex);
    } else {
      showFinalResult();
    }
  };
};

    scale.appendChild(btn);
  }
}

function showFinalResult() {
  let total = 0, weightTotal = 0;

  const resultList = userScores.map(entry => {
    return `<li style="margin-bottom: 12px;">
      <strong>Q:</strong> ${entry.question}<br/>
      <strong>Your Answer:</strong> ${entry.originalInput}
    </li>`;
  }).join("");

  userScores.forEach(entry => {
    total += entry.score * entry.weight;
    weightTotal += entry.weight;
  });

  const avg = total / weightTotal;
let label = "⚠️ Domestic Threat";
if (avg >= 0.5) label = "🕳️ Accelerationist";
if (avg >= 1.5) label = "🔥 Militant Mindset";
if (avg >= 2.5) label = "🛰️ Operational Extremist";
if (avg >= 3.5) label = "🧨 Extremist-Leaning";
if (avg >= 4.5) label = "📡 Radicalized";
if (avg >= 5.5) label = "🛡️ Dogmatic";
if (avg >= 6.5) label = "🪞 Ideological Echo";
if (avg >= 7.5) label = "🧭 Tilted";
if (avg >= 8.5) label = "🪶 Healthy Skeptic";
if (avg >= 9.5) label = "🦉 Grounded";

  // Render results
document.getElementById("quiz-container").innerHTML = `
  <h2>Your Strategic Owl Insight</h2>
  <p style="font-size: 1.2rem;">Weighted Score: <strong>${avg.toFixed(2)}</strong></p>
  <p style="font-size: 1.4rem; font-weight: bold; color: var(--understanding);">${label}</p>
  <hr style="margin: 30px 0; border: 1px solid var(--highlight);" />
  <div style="max-width: 700px; margin: 0 auto;">${resultList}</div>
`;
  }

window.addEventListener("DOMContentLoaded", async () => {
  quizData = await fetchTRUData();
  loadQuestion(currentIndex);
});

function toggleMenu() {
  document.getElementById("navMenu").classList.toggle("show");
}
</script>
</body>
</html>
