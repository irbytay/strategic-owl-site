<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strategic Owl | The Constitution</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
 <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&display=swap" rel="stylesheet" />
  <style>
  :root {
    --background: #0D1B2A;
    --surface: #112240;
    --highlight: #1A2B4C;
    --truth: #28A745;
    --reliability: #3B6CED;
    --understanding: #D4AF37;
    --text: #FFFFFF;
    --text-muted: #7C8A9B;
    --heading: #FFFFF0;
    --shadow: rgba(0, 0, 0, 0.3);
    --bar-red: #FF4C4C;
    --bar-green: #28A745;
  }

  body {
    background-color: var(--background);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
  }

  /* ðŸ§­ NAVBAR & MENU */
  nav.top-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background-color: var(--highlight);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px;
    box-shadow: 0 2px 6px var(--shadow);
  }

  .nav-title {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    color: var(--understanding);
  }

  .menu-toggle {
    display: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text);
    background: none;
    border: none;
  }

  .nav-links {
    display: flex;
    gap: 28px;
  }

  .nav-links a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 15px;
    transition: color 0.3s ease;
  }

  .nav-links a:hover {
    color: var(--understanding);
  }
    .nav-logo img {
  height: 40px;
  width: 40px;
}
    .nav-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  font-weight: 600;
  color: var(--text);
  font-size: 1.25rem;
}
    /* ðŸŽ¨ TRU Bars */
  .divider-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 40px auto;
  }

  .divider-bar {
    display: flex;
    gap: 12px;
    width: 340px;
  }

  .divider-bar div {
    width: 108px;
    height: 6px;
    border-radius: 3px;
    box-shadow: 0 0 4px var(--shadow);
  }

  .truth { background-color: var(--truth); }
  .reliability { background-color: var(--reliability); }
  .understanding { background-color: var(--understanding); }

  .divider-labels {
    display: flex;
    justify-content: center;
    gap: 12px;
    width: 340px;
    margin-top: 8px;
  }

  .divider-labels span {
    width: 108px;
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .menu-toggle {
      display: block;
    }

    .nav-links {
      display: none;
      flex-direction: column;
      align-items: center;/* ðŸ‘ˆ links side-by-side on mobile */
      justify-content: center;
      background-color: var(--highlight);
      position: absolute;
      top: 58px;
      left: 0;
      width: 100%;
      padding: 10px 0;
      gap: 20px;
      box-shadow: 0 3px 8px var(--shadow);
    }
    .nav-links a {
  padding: 10px 0;
  width: 100%;
  text-align: center;
  font-size: 1rem;
}

    .nav-links.show {
      display: flex;
      animation: fadeSlideDown 0.3s ease;
    }

    @keyframes fadeSlideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
    @media (max-width: 500px) {
  #legal-popup > div {
    padding: 12px;
    font-size: 0.95rem;
  }

  #accept-btn {
    width: 100%;
    font-size: 1rem;
  }

  p {
    font-size: 0.95rem;
    margin-bottom: 16px;
  }
}

  /* âœ… YOUR ORIGINAL STYLES BELOW */
  .container {
    max-width: 960px;
    margin: 100px auto 0 auto;
    padding: 24px;
  }

  h1 {
    font-family: 'Playfair Display', serif;
    color: var(--heading);
    margin-bottom: 16px;
    text-align: center;
  }
  h2 {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  color: var(--understanding); /* golden highlight */
  font-weight: 600;
  margin-top: 32px;
  margin-bottom: 12px;
  text-align: center;
}
  p {
  font-family: 'Inter', sans-serif;
  font-size: 1.05rem;
  color: var(--text-muted);
  line-height: 1.6;
  margin-bottom: 20px;
  text-align: center;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}

  select {
    padding: 8px;
    margin-bottom: 16px;
    background-color: var(--surface);
    color: var(--text);
    border: 1px solid var(--highlight);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--surface);
    margin-top: 12px;
  }

  th, td {
    padding: 12px;
    border-bottom: 1px solid var(--highlight);
    text-align: left;
  }

  .text-truth { color: var(--truth); }
  .text-reliability { color: var(--reliability); }
  .text-understanding { color: var(--understanding); }

  .total-score {
    font-weight: bold;
  }

  .positive-score { color: var(--bar-green); }
  .negative-score { color: var(--bar-red); }

  .score-bar {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .bar-indicator {
    width: 10px;
    height: 24px;
    border-radius: 2px;
  }

  .bar-red {
    background-color: var(--bar-red);
  }

  .bar-green {
    background-color: var(--bar-green);
  }
    .match-nav-link {
  color: var(--text-muted);
  text-decoration: none;
  font-size: 15px;
  transition: color 0.3s ease;
}

.match-nav-link:hover {
  color: var(--understanding);
}
 /* ðŸ¦‰ Strategic Owl Button Style */
.owl-button {
  background-color: var(--navy);            /* Deep base color */
  color: white;                             /* Clean readable text */
  font-weight: 600;                         /* Medium-bold */
  padding: 10px 18px;
  border: 1px solid var(--reliability);     /* Outline in reliability yellow */
  border-radius: 8px;
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  cursor: pointer;
  text-decoration: none;
  transition: 
    background-color 0.3s ease, 
    color 0.3s ease,
    box-shadow 0.3s ease;
}

.owl-button:hover {
  background-color: var(--reliability);     /* Hover color = yellow */
  color: var(--navy);                       /* Invert text color */
  box-shadow: 0 0 12px var(--reliability);  /* Glow on hover */
}
</style>

<nav class="top-nav">
<a href="TRUOWL3.html" class="nav-logo">
  <img src="owl_logo_white.png" alt="Owl Logo" onerror="this.style.display='none';" />
  <div class="nav-title">The Strategic Owl</div>
</a>
  <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
  <div class="nav-links" id="navMenu">
   <a href="Index.html">Home</a>
    <a href="TRUOWL3.html">T.R.U. Owl</a>
    <a href="newelections3.html">Election Security</a>
    <a href="the_constitution.html">The Constitution</a>
    <a href="newcontact3.html">Contact</a>
  </div>
</nav>
  <div class="container">
    <h1>The Constitution</h1>
<!-- ðŸŽ¯ Divider -->
    <section class="divider-section">
      <div class="divider-bar">
        <div class="truth"></div>
        <div class="reliability"></div>
        <div class="understanding"></div>
      </div>
      <div class="divider-labels">
        <span>Truth</span>
        <span>Reliability</span>
        <span>Understanding</span>
      </div>
    </section>
  <!-- ðŸ¦‰ Strategic Owl Radicalization Quiz -->
<div id="quiz-container" class="container">
  <h2 style="text-align: center; color: var(--understanding); font-family: 'Montserrat', sans-serif;">
    How Strategically Grounded Are You?
  </h2>

  <p style="text-align: center; max-width: 600px; margin: 0 auto 24px; color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 1rem;">
    Use the scale below to answer honestly. This helps evaluate civic perception â€” not partisanship.
  </p>

  <!-- Injected question using Montserrat to match title -->
  <div id="quiz-question" style="
    margin-top: 40px;
    text-align: center;
    font-family: 'Montserrat', sans-serif;
    color: var(--understanding);
    font-size: 1.4rem;
    font-weight: 600;
  "></div>

  <!-- Numeric answer buttons -->
  <div id="quiz-scale" style="
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
  "></div>

  <!-- Inline narrative response area -->
  <div id="narrative-display" style="
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    display: none;
    background-color: var(--surface);
    color: var(--text);
    border-left: 4px solid var(--reliability);
    border-radius: 8px;
    font-size: 1rem;
    font-family: 'Inter', sans-serif;
    text-align: center;
  "></div>

  <!-- Deprecated fallback button -->
  <button id="next-question" style="
    display: none;
    margin: 0 auto;
    background-color: var(--highlight);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
  ">
    Next
  </button>

  <!-- Final result rendered here -->
  <div id="quiz-result" style="margin-top: 40px;"></div>
</div>

<script>
const SHEET_ID = "19wBEj9hEkvIyQcoR5E_mBGVAxTzMnddMxk8nuQLAumA";
const API_KEY = "AIzaSyCzuh9HBfe0r70r9U35Pe406PPZ-tz6I78";
const RANGE = "TRUTest!A3:G100";

let quizData = [];
let currentIndex = 0;
let userScores = [];

async function fetchQuizData() {
  const SHEET_ID = 'YOUR_SHEET_ID';
  const API_KEY = 'YOUR_API_KEY';
  const RANGE = 'TRUTest!C3:G100';
  const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`);
  const data = await response.json();
  quizData = data.values;
  loadQuestion(currentIndex);
}

function loadQuestion(index) {
  const [question, narrative0, narrative5, narrative10, weight] = quizData[index];
  const container = document.getElementById("quiz-question");
  const scale = document.getElementById("quiz-scale");
  const narrativeBox = document.getElementById("narrative-display");
  const resultBox = document.getElementById("quiz-result");

  container.innerHTML = `<h2 style="text-align: center; color: var(--understanding); font-family: 'Montserrat', sans-serif;">${question}</h2>`;
  scale.innerHTML = "";
  narrativeBox.innerHTML = "";
  resultBox.innerHTML = "";

  for (let i = 0; i <= 10; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.className = "owl-button";
    btn.onclick = () => {
      let narrative = narrative5;
      if (i <= 3) narrative = narrative0;
      if (i >= 8) narrative = narrative10;

      userScores[index] = {
        score: i,
        weight: parseFloat(weight) || 1.0
      };

      narrativeBox.innerHTML = `
        <p style="margin-top: 20px; font-family: 'Inter', sans-serif; font-size: 1rem; color: var(--text);">${narrative}</p>
        <div style="text-align: center; margin-top: 20px;">
          <button class="owl-button" onclick="nextQuestion()">Next Question</button>
        </div>
      `;
    };
    scale.appendChild(btn);
  }
}

function nextQuestion() {
  currentIndex++;
  if (currentIndex < quizData.length) {
    loadQuestion(currentIndex);
  } else {
    showFinalResult();
  }
}

function showFinalResult() {
  const resultBox = document.getElementById("quiz-result");
  const narrativeBox = document.getElementById("narrative-display");
  const container = document.getElementById("quiz-container");

  let totalScore = 0;
  let totalWeight = 0;

  for (let entry of userScores) {
    const score = typeof entry?.score === "number" ? entry.score : 0;
    const weight = typeof entry?.weight === "number" ? entry.weight : 1.0;
    totalScore += score * weight;
    totalWeight += weight;
  }

  const weightedAvg = totalWeight > 0 ? totalScore / totalWeight : 0;
  const roundedScore = Math.round(weightedAvg * 10) / 10;

  let label = "Grounded";
  let message = "You demonstrate strong civic awareness and strategic thinking.";

  if (roundedScore < 4) {
    label = "Ideologically Vulnerable";
    message = "Your responses reflect some susceptibility to extreme or unsupported narratives.";
  } else if (roundedScore < 7) {
    label = "Cautiously Aware";
    message = "You seem open-minded, but may be influenced by certain skewed sources.";
  }

  resultBox.innerHTML = `
    <div style="text-align: center; max-width: 600px; margin: 0 auto; padding: 24px; border-top: 1px solid var(--border); font-family: 'Inter', sans-serif;">
      <h3 style="color: var(--understanding); font-family: 'Playfair Display', serif;">Final Score: ${roundedScore} / 10</h3>
      <p style="font-size: 1.1rem; font-weight: 600; color: var(--truth); margin-bottom: 6px;">Label: ${label}</p>
      <p style="color: var(--text-muted); font-size: 1rem;">${message}</p>
    </div>
  `;

  narrativeBox.innerHTML = "";
  document.getElementById("quiz-scale").innerHTML = "";
  document.getElementById("quiz-question").innerHTML = "";
}

  function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("show");
  }
  
</script>
</body>
</html>
