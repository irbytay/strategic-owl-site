<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strategic Owl | The Constitution</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">

  <style>
  /* 🔹 CSS variables (theme colors) */
  :root {
    --background: #0D1B2A;
    --surface: #112240;
    --highlight: #1A2B4C;
    --truth: #28A745;
    --reliability: #3B6CED;
    --understanding: #D4AF37;
    --text: #FFFFFF;
    --text-muted: #7C8A9B;
    --heading: #FFFFF0;
    --shadow: rgba(0, 0, 0, 0.3);
    --bar-red: #FF4C4C;
    --bar-green: #28A745;
  }

  /* 🔹 Body base styles */
  body {
    background-color: var(--background);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
  }

  /* 🧭 NAVBAR & MENU */
  /* 🔹 Navbar styles */
  nav.top-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background-color: var(--highlight);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px;
    box-shadow: 0 2px 6px var(--shadow);
  }

  /* 🔹 Navbar title */
  .nav-title {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    color: var(--understanding);
  }

  /* 🔹 Navbar menu toggle button */
  .menu-toggle {
    display: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text);
    background: none;
    border: none;
  }

  /* 🔹 Navbar links container */
  .nav-links {
    display: flex;
    gap: 20px;
  }

  /* 🔹 Navbar link styles */
  .nav-links a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 15px;
    transition: color 0.3s ease;
  }

  /* 🔹 Navbar link hover effect */
  .nav-links a:hover {
    color: var(--understanding);
  }
    /* 🔹 Navbar logo image */
    .nav-logo img {
  height: 40px;
  width: 40px;
}
    /* 🔹 Navbar logo container */
    .nav-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  font-weight: 600;
  color: var(--text);
  font-size: 1.25rem;
}
    /* 🔹 TRU Bars section */
  .divider-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 40px auto;
  }

  /* 🔹 TRU Bars bar container */
  .divider-bar {
    display: flex;
    gap: 12px;
    width: 340px;
  }

  /* 🔹 Individual TRU bar */
  .divider-bar div {
    width: 108px;
    height: 6px;
    border-radius: 3px;
    box-shadow: 0 0 4px var(--shadow);
  }

  /* 🔹 TRU bar colors */
  .truth { background-color: var(--truth); }
  .reliability { background-color: var(--reliability); }
  .understanding { background-color: var(--understanding); }

  /* 🔹 TRU Bars labels container */
  .divider-labels {
    display: flex;
    justify-content: center;
    gap: 12px;
    width: 340px;
    margin-top: 8px;
  }

  /* 🔹 TRU Bars label text */
  .divider-labels span {
    width: 108px;
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  /* 🔹 Responsive styles for navbar (mobile) */
  @media (max-width: 768px) {
    /* 🔹 Show menu toggle on mobile */
    .menu-toggle {
      display: block;
    }

    /* 🔹 Mobile navbar links container */
    .nav-links {
      display: none;
      flex-direction: column;
      align-items: center;/* 👈 links side-by-side on mobile */
      justify-content: center;
      background-color: var(--highlight);
      position: absolute;
      top: 58px;
      left: 0;
      width: 100%;
      padding: 10px 0;
      gap: 20px;
      box-shadow: 0 3px 8px var(--shadow);
    }
    /* 🔹 Mobile navbar link styles */
    .nav-links a {
  padding: 10px 0;
  width: 100%;
  text-align: center;
  font-size: 1rem;
}

    /* 🔹 Show mobile navbar links */
    .nav-links.show {
      display: flex;
      animation: fadeSlideDown 0.3s ease;
    }

    /* 🔹 Animation for mobile navbar links */
    @keyframes fadeSlideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
    /* 🔹 Responsive styles for legal popup and text (mobile) */
    @media (max-width: 500px) {
  #legal-popup > div {
    padding: 12px;
    font-size: 0.95rem;
  }

  #accept-btn {
    width: 100%;
    font-size: 1rem;
  }

  p {
    font-size: 0.95rem;
    margin-bottom: 16px;
  }
}

  /* 🔹 Founding text style box (amendment quick output) */
  /* ⚠️ This style is applied to the right-side display that is injected via JS when a right is selected.
     The text itself (e.g., "→ Amendment: 1 (I)") comes from the hardcoded map in JavaScript (rightToAmendmentMap),
     not from the Google Sheet.
  */
  .founding-text-box {
    background: #fff8e1;
    border-radius: 8px;
    box-shadow: 0 0 10px #C4A000, inset 0 0 5px rgba(0,0,0,0.2);
    border: 2px solid #C4A000;
    font-family: 'Dancing Script', cursive;
    font-size: 1.2rem;
    font-weight: 600;
    color: #000;
    padding: 1.5rem;
    margin: 1.5rem auto;
    max-width: 720px;
    text-align: center;
    white-space: pre-line;
  }
  /* 🔹 Main container */
  .container {
    max-width: 960px;
    margin: 100px auto 0 auto;
    padding: 24px;
  }

  /* ⚠️ This class is applied to content dynamically inserted from the Google Sheet (e.g., full amendment text,
     strategic insights, and prompts). The data comes from the range "the_constitution!A2:G1000" for insights
     and founding text, and "the_constitution!F2:G100" for subject lookup.
  */
  /* 🔹 Content box (dynamic width) */
  .content-box {
    background: #fdf6e3;
    font-family: 'Dancing Script', cursive;
    font-size: 20px;
    line-height: 1.5;
    font-weight: 400;
    color: #000000;
    padding: 1.5rem;
    border-radius: 8px;
    border: 2px solid #C4A000;
    box-shadow: 0 0 10px #C4A000, inset 0 0 5px rgba(0,0,0,0.2);
    margin: 1rem auto;
    white-space: pre-wrap;
    overflow-x: auto;
  }
  /* 🔹 Wide content box */
  .wide-box {
    max-width: 1200px;
  }
  /* 🔹 Narrow content box */
  .narrow-box {
    max-width: 720px;
  }

  /* 🔹 Heading 1 styles */
  h1 {
    font-family: 'Playfair Display', serif;
    color: var(--understanding);
    margin-bottom: 16px;
    text-align: center;
  }
  /* 🔹 Heading 2 styles */
  h2 {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  color: var(--understanding); /* golden highlight */
  font-weight: 600;
  margin-top: 32px;
  margin-bottom: 12px;
  text-align: center;
}
  /* 🔹 Paragraph styles */
  p {
  font-family: 'Inter', sans-serif;
  font-size: 1.05rem;
  color: var(--text-muted);
  line-height: 1.6;
  margin-bottom: 20px;
  text-align: center;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}

  /* 🔹 Dropdown select styles */
  select {
    padding: 12px 14px;
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--understanding);
    font-family: 'Copperplate', serif;
    font-size: 15px;
    font-weight: 500;
    border: 1px solid rgba(212, 175, 55, 0.4);
    border-radius: 12px;
    width: 100%;
    max-width: 420px;
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
    appearance: none;
    background-image: url("data:image/svg+xml;utf8,<svg fill='%23D4AF37' height='18' viewBox='0 0 24 24' width='18' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px;
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
  }

  /* 🔹 Label styles */
  label {
    color: var(--understanding);
    font-family: 'Copperplate', serif;
    font-size: 16px;
    font-weight: 500;
    text-align: center;
  }

  /* 🔹 Dropdown hover/focus styles */
  select:hover,
  select:focus {
    border-color: var(--understanding);
    box-shadow: 0 0 10px var(--understanding);
    outline: none;
  }

  /* 🔹 Table styles */
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--surface);
    margin-top: 12px;
  }

  /* 🔹 Table header and cell styles */
  th, td {
    padding: 12px;
    border-bottom: 1px solid var(--highlight);
    text-align: left;
  }

  /* 🔹 TRU colored text */
  .text-truth { color: var(--truth); }
  .text-reliability { color: var(--reliability); }
  .text-understanding { color: var(--understanding); }

  /* 🔹 Total score text */
  .total-score {
    font-weight: bold;
  }

  /* 🔹 Score coloring */
  .positive-score { color: var(--bar-green); }
  .negative-score { color: var(--bar-red); }

  /* 🔹 Score bar container */
  .score-bar {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  /* 🔹 Score bar indicator */
  .bar-indicator {
    width: 10px;
    height: 24px;
    border-radius: 2px;
  }

  /* 🔹 Red bar (negative) */
  .bar-red {
    background-color: var(--bar-red);
  }

  /* 🔹 Green bar (positive) */
  .bar-green {
    background-color: var(--bar-green);
  }
    /* 🔹 Match navigation link */
    .match-nav-link {
  color: var(--text-muted);
  text-decoration: none;
  font-size: 15px;
  transition: color 0.3s ease;
}

/* 🔹 Match navigation link hover */
.match-nav-link:hover {
  color: var(--understanding);
}

/* 🔹 Important link (styled, with arrows and hover effect) */
.important-link {
  color: var(--understanding);               /* Gold color from your theme */
  font-weight: 700;                          /* Bold for visibility */
  text-decoration: underline;                /* Underline to signal it's a link */
  text-underline-offset: 4px;                /* Adds spacing between text and underline */
  position: relative;                        /* Required for pseudo-elements */
  transition: color 0.3s ease, text-shadow 0.3s ease;  /* Smooth hover transitions */
}

/* 🔹 Important link: right-pointing arrow before */
.important-link::before {
  content: '→ ';                             /* Arrow pointing right */
  display: inline-block;                     /* So we can animate it */
  margin-right: 6px;                         /* Space between arrow and text */
  transition: transform 0.3s ease;           /* Smooth movement on hover */
}

/* 🔹 Important link: left-pointing arrow after */
.important-link::after {
  content: ' ←';                             /* Arrow pointing left */
  display: inline-block;                     /* Enables transform */
  margin-left: 6px;                          /* Space between text and arrow */
  transition: transform 0.3s ease;           /* Smooth hover animation */
}

/* 🔹 Important link: animate left arrow on hover */
.important-link:hover::before {
  transform: translateX(4px);                /* Moves → arrow to the right */
}

/* 🔹 Important link: animate right arrow on hover */
.important-link:hover::after {
  transform: translateX(-4px);               /* Moves ← arrow to the left */
}

/* 🔹 Important link: hover glow and color change */
.important-link:hover {
  text-shadow: 0 0 8px var(--understanding); /* Subtle glow using gold tone */
  color: var(--truth);                       /* Optional: changes to green (truth color) */
}
</style>

<nav class="top-nav">
<a href="TRUOWL3.html" class="nav-logo">
  <img src="owl_logo_white.png" alt="Owl Logo" onerror="this.style.display='none';" />
  <div class="nav-title">The Strategic Owl</div>
</a>
  <button class="menu-toggle" onclick="toggleMenu()">☰</button>
  <div class="nav-links" id="navMenu">
   <a href="Index.html">Home</a>
<a href="Dash.html">Dash's</a>
<a href="TRUOWL3.html">T.R.U. Owl</a>
<a href="strategic-owl-insight-quiz.html">Insight Quiz</a>
<a href="realitycheck.html">Reality Check</a>
<a href="the_constitution.html">The Constitution</a>
<a href="newcontact3.html">Contact</a>
<a href="https://strategicfretboard.com" target="_blank" rel="noopener noreferrer">Strategic Fretboard</a>
  </div>
</nav>
  <div class="container">
    <h1>The Constitution</h1>
<!-- 🎯 Divider -->
    <section class="divider-section">
      <div class="divider-bar">
        <div class="truth"></div>
        <div class="reliability"></div>
        <div class="understanding"></div>
      </div>
      <div class="divider-labels">
        <span>Truth</span>
        <span>Reliability</span>
        <span>Understanding</span>
      </div>
    </section>
    <!-- 🦉 Strategic Intro Box -->
    <div class="strategic-intro-box" style="background: linear-gradient(to bottom right, #1A2B4C, #0D1B2A); border: 1px solid #D4AF37; border-radius: 12px; padding: 20px; box-shadow: 0 0 12px rgba(212, 175, 55, 0.3); max-width: 800px; margin: 0 auto 2rem auto;">
      <p style="font-family: 'Roboto', sans-serif; font-size: 14px; color: rgba(255, 255, 255, 0.7); line-height: 1.6; text-align: center; margin: 0;">
        You can explore the Constitution two ways: select a right granted (like free speech or equal protection), or directly select any part of the original text. Once selected, you’ll see the full text, have the option to capture it, read a plain-language breakdown, and even copy an AI research prompt for deeper exploration.
      </p>
    </div>
   <!-- 🦉 Subject → Amendment Lookup (Strategic Owl Style) -->
<div style="display: flex; flex-direction: column; gap: 12px; align-items: center; margin-top: 40px;">



  <select id="subject-quick"
    style="padding: 12px 14px; background-color: rgba(255,255,255,0.05); color: var(--understanding); font-family: 'Copperplate', serif; font-size: 15px; font-weight: 500; border: 1px solid rgba(212,175,55,0.4); border-radius: 12px; width: 100%; max-width: 420px; box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2); appearance: none; background-image: url('data:image/svg+xml;utf8,<svg fill=\'%23D4AF37\' height=\'18\' viewBox=\'0 0 24 24\' width=\'18\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M7 10l5 5 5-5z\'/></svg>'); background-repeat: no-repeat; background-position: right 10px center; background-size: 16px; transition: box-shadow 0.3s ease, border-color 0.3s ease; text-align: center; text-align-last: center;">
    <option value="">-- Select a Right --</option>
  </select>

  <div id="subject-quick-output"
    style="margin-top: 4px; font-size: 1.05rem; color: var(--understanding); font-family: 'Montserrat', sans-serif; text-align: center;">
  </div>
</div>
  <div style="display: flex; justify-content: center;">
    <select id="subject-select" data-user-selected="false" style="padding: 12px 14px; background-color: rgba(255,255,255,0.05); color: var(--understanding); font-family: 'Copperplate', serif; font-size: 15px; font-weight: 500; border: 1px solid rgba(212,175,55,0.4); border-radius: 12px; width: 100%; max-width: 420px; box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2); appearance: none; background-image: url('data:image/svg+xml;utf8,<svg fill=\'%23D4AF37\' height=\'18\' viewBox=\'0 0 24 24\' width=\'18\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M7 10l5 5 5-5z\'/></svg>'); background-repeat: no-repeat; background-position: right 10px center; background-size: 16px; transition: box-shadow 0.3s ease, border-color 0.3s ease; text-align: center; text-align-last: center;">
      <option value="">-- Select the Founding Text --</option>
    </select>
  </div>

<div id="insight-output" style="max-width: 960px; margin: 40px auto 0; font-family: 'Montserrat', sans-serif; color: var(--text);">
  <!-- Content is inserted here dynamically -->
</div>

<script>
  const SHEET_ID = "19wBEj9hEkvIyQcoR5E_mBGVAxTzMnddMxk8nuQLAumA";
  const API_KEY = "AIzaSyCzuh9HBfe0r70r9U35Pe406PPZ-tz6I78";
  const RANGE = "the_constitution!A2:G1000";


  const colors = {
    gold: "#D4AF37",
    text: "#FFFFFF",
    bullet: "#7C8A9B",
    heading: "#FFFFF0"
  };

  async function fetchAmendmentData() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;
    const res = await fetch(url);
    const json = await res.json();
    return json.values || [];
  }

  // Patch: Completely refactor initAmendmentDropdown to:
  // 1. Listen for dropdown selection of a documentpart.
  // 2. Load the corresponding hardcoded full text for that part.
  // 3. Retrieve matching Strategic Insight and Prompt from the Google Sheet.
  // 4. Insert the Strategic Insight below the full text container as a paragraph.
  // 5. Insert the Prompt inside a <textarea> styled as described.
  // 6. Add a new <div> and <textarea> below the full text display.
  async function initAmendmentDropdown() {
    const amendmentSelect = document.getElementById("subject-select");
    const outputDiv = document.getElementById("insight-output");
    // Add the new containers for strategic insight and prompt below the outputDiv
    let insightDiv = document.getElementById("strategic-insight");
    if (!insightDiv) {
      insightDiv = document.createElement("div");
      insightDiv.id = "strategic-insight";
      insightDiv.style.marginTop = "2rem";
      // Insert after outputDiv
      outputDiv.insertAdjacentElement("afterend", insightDiv);
    }
    // Only add prompt textarea if not present (no capture button)
    let promptBox = document.getElementById("capture-box");
    // Style for promptBox to match full text and insight box widths (width: 100%; margin: 0 auto;)
    const promptBoxStyle = `
      background-color: #112240;
      border: 2px solid #D4AF37;
      border-radius: 8px;
      padding: 12px 16px;
      font-family: 'Courier', monospace;
      font-size: 14px;
      color: #D4AF37;
      width: 95%;
      margin: 0 auto;
      box-shadow: 0 0 10px #3B6CED;
      white-space: pre-wrap;
      overflow: hidden;
      resize: none;
      display: none;
    `;
    let instructions = document.getElementById("prompt-instructions");
    if (!promptBox) {
      promptBox = document.createElement("textarea");
      promptBox.readOnly = true;
      promptBox.setAttribute("style", promptBoxStyle);
      promptBox.id = "capture-box";
      // Insert the instructional div just above promptBox
      instructions = document.createElement("div");
      instructions.id = "prompt-instructions";
      instructions.textContent = "Capture the prompt. Paste it. See what you find.";
      instructions.style.color = "#D4AF37";
      instructions.style.fontFamily = "Copperplate, serif";
      instructions.style.fontSize = "15px";
      instructions.style.marginTop = "24px";
      instructions.style.marginBottom = "8px";
      instructions.style.textAlign = "center";
      instructions.style.display = "none"; // Initially hidden
      // Insert instructions and promptBox after insightDiv
      const container = insightDiv.parentElement;
      container.appendChild(instructions);
      container.appendChild(promptBox);
    } else {
      instructions = document.getElementById("prompt-instructions");
    }

    // Fetch all document parts and their strategic insight/prompt from Google Sheets
    const sheetData = await fetchAmendmentData();
    // Columns: [A:documentpart, B:section, C:fulltext, D:insight, E:prompt, ...]
    // Build options for dropdown (unique documentpart)
    const seen = {};
    sheetData.forEach(row => {
      const docpart = row[0];
      if (docpart && !seen[docpart]) {
        const opt = document.createElement("option");
        opt.value = docpart;
        opt.textContent = docpart;
        amendmentSelect.appendChild(opt);
        seen[docpart] = true;
      }
    });
    // Add Declaration of Independence as a special case if not present
    if (!seen["Declaration of Independence"]) {
      const decOpt = document.createElement("option");
      decOpt.value = "Declaration of Independence";
      decOpt.textContent = "Declaration of Independence";
      amendmentSelect.appendChild(decOpt);
    }

    // Listen for changes on dropdown (subject-select)
    amendmentSelect.addEventListener("change", () => {
      const selected = amendmentSelect.value;
      outputDiv.innerHTML = "";
      insightDiv.innerHTML = "";
      promptBox.value = "";
      // Remove any previously added full text textarea if present
      let prevFullTextBox = document.getElementById("fulltext-box");
      if (prevFullTextBox) prevFullTextBox.remove();
      // Hide prompt box and instructions by default
      promptBox.style.display = "none";
      if (instructions) instructions.style.display = "none";
      // Remove any previously inserted prompt capture button
      let prevPromptCaptureBtn = document.getElementById("prompt-capture-btn");
      if (prevPromptCaptureBtn) prevPromptCaptureBtn.remove();
      // Remove any previously inserted founding text capture button
      let prevFoundingCaptureBtn = document.getElementById("founding-text-capture-btn");
      if (prevFoundingCaptureBtn) prevFoundingCaptureBtn.remove();
      if (!selected) return;
      let fullText = "";
      let insight = "";
      let prompt = "";
      // Gather all rows where column A matches the selected founding text (selected)
      const matches = sheetData.filter(row => row[0] === selected);
      if (matches.length > 0) {
        // For Preamble and all others: Join all matching full texts, include section label (Column B) above full text, bold the section label
        fullText = matches
          .map(row => `<strong>${row[1]}</strong>\n${row[2]}`)
          .filter(Boolean)
          .join('\n\n');
        // Use only the first matching non-empty insight (Column D)
        insight = matches.find(row => row[3] && row[3].trim())?.[3] || "";
        // Use only the first matching non-empty prompt (Column E)
        prompt = matches.find(row => row[4] && row[4].trim())?.[4] || "";
      }
      // Show the full text in a <pre> styled as per branding
      if (fullText) {
        // Replace all literal \n\n (not actual newlines) with real newlines for display
        const displayText = fullText.replace(/\\n\\n/g, "\n\n");
        // Insert the h2/title inside the pre box at the top
        const fullTextDisplay = document.createElement("pre");
        fullTextDisplay.id = "founding-text-content";
        // Use innerHTML for displayText, now preserving HTML tags (no escaping)
        fullTextDisplay.innerHTML =
          `<div style="text-align: center; font-family: 'Dancing Script', cursive; font-size: 24px; font-weight: 600; margin-bottom: 1rem;">${selected}</div>` +
          displayText;
        fullTextDisplay.className = "content-box wide-box";
        outputDiv.appendChild(fullTextDisplay);
        // (Founding text capture button removed)
      }
      // Show Strategic Insight below full text
      insightDiv.innerHTML = "";
      if (insight && insight.trim()) {
        const insightText = document.createElement("p");
        // Replace all literal \n\n (not actual newlines) with real newlines for display
        insightText.textContent = insight.replace(/\\n\\n/g, "\n\n");
        insightText.className = "content-box narrow-box";
        insightText.style.fontFamily = '"Roboto", sans-serif';
        insightText.style.borderLeft = `4px solid var(--understanding)`;
        insightText.style.backgroundColor = "#1A2B4C";
        insightText.style.color = "var(--understanding)";
        insightText.style.fontWeight = "500";
        insightDiv.appendChild(insightText);
      }
      // Show Prompt in promptBox (textarea)
      promptBox.value = "";
      promptBox.className = "content-box";
      if (prompt && prompt.trim()) {
        // Replace all literal \n\n (not actual newlines) with real newlines for display
        promptBox.value = prompt.replace(/\\n\\n/g, "\n\n");
      }
      setTimeout(() => {
        promptBox.style.height = "auto";
        promptBox.style.height = promptBox.scrollHeight + "px";
      }, 0);
      // Show prompt box and instructions only if there is a prompt
      if (promptBox.value.trim()) {
        promptBox.style.display = "block";
        if (instructions) instructions.style.display = "block";
        // Add capture button for prompt
        const promptCaptureBtn = document.createElement("button");
        promptCaptureBtn.id = "prompt-capture-btn";
        promptCaptureBtn.textContent = "Capture";
        // Style the button to match prompt visually and structurally
        promptCaptureBtn.style.backgroundColor = "#C4A000";
        promptCaptureBtn.style.border = "1px solid #C4A000";
        promptCaptureBtn.style.color = "#0D1B2A";
        promptCaptureBtn.style.fontFamily = "Copperplate, serif";
        promptCaptureBtn.style.fontWeight = "bold";
        promptCaptureBtn.style.fontSize = "16px";
        promptCaptureBtn.style.borderRadius = "12px";
        promptCaptureBtn.style.padding = "10px 28px";
        promptCaptureBtn.style.boxShadow = "0 6px 20px #3B6CED66";
        promptCaptureBtn.style.cursor = "pointer";
        promptCaptureBtn.style.letterSpacing = "1.2px";
        // Ensure width and centering match promptBox
        promptCaptureBtn.style.margin = "12px auto 8px auto";
        promptCaptureBtn.style.display = "block";
        promptCaptureBtn.style.textAlign = "center";
        // Insert the button immediately after the promptBox
        promptBox.insertAdjacentElement("afterend", promptCaptureBtn);
        promptCaptureBtn.addEventListener("click", () => {
          const text = promptBox.value || promptBox.textContent;
          if (text.trim()) {
            navigator.clipboard.writeText(text.trim()).then(() => {
              promptCaptureBtn.textContent = "Captured";
              setTimeout(() => {
                promptCaptureBtn.textContent = "Capture";
              }, 5000);
            });
          }
        });
      }
    });
  }
  // --- Hardcoded map: right -> founding text value (amendment) ---
  // --- Hardcoded map: amendment -> rights array ---
  const amendmentToRightsMap = {
    "1st Amendment": ["Speak Freely", "Free Press", "Choose Faith", "Gather Peacefully", "Challenge Power"],
    "2nd Amendment": ["Own Arms"],
    "3rd Amendment": ["No Forced Lodging"],
    "4th Amendment": ["Privacy at Home", "Warrants Only"],
    "5th Amendment": ["Fair Process (Federal)", "Stay Silent", "One Trial Only", "Pay for What You Take", "Grand Jury First"],
    "6th Amendment": ["Fast Trial", "Public Trial", "Unbiased Jury", "Know the Charge", "Face Accusers", "Call Witnesses", "Right to Lawyer"],
    "7th Amendment": ["Jury for Civil"],
    "8th Amendment": ["No Excessive Bail", "No Cruel Punishment"],
    "9th Amendment": ["More Rights Exist"],
    "10th Amendment": ["States Hold Power"],
    "11th Amendment": ["Can’t Sue States Easily"],
    "12th Amendment": ["Clear Elections"],
    "13th Amendment": ["Slavery Ends"],
    "14th Amendment": ["Born = Citizen", "Fair Process (States)", "States Must Be Fair", "Rights Apply Nationwide"],
    "15th Amendment": ["Vote Regardless of Race"],
    "16th Amendment": ["Income Tax Legal"],
    "17th Amendment": ["Senators by Vote"],
    "18th Amendment": ["No Alcohol"],
    "19th Amendment": ["Women Can Vote"],
    "20th Amendment": ["Inauguration Reset"],
    "21st Amendment": ["Alcohol Repealed"],
    "22nd Amendment": ["2-Term Max"],
    "23rd Amendment": ["D.C. Votes Too"],
    "24th Amendment": ["No Poll Taxes"],
    "25th Amendment": ["Succession Plan"],
    "26th Amendment": ["Vote at 18"],
    "27th Amendment": ["No Instant Raises"]
  };
  const rightToAmendmentMap = {
    "Speak Freely": { shorthand: "1 (I)", full: "1st Amendment" },
    "Free Press": { shorthand: "1 (I)", full: "1st Amendment" },
    "Choose Faith": { shorthand: "1 (I)", full: "1st Amendment" },
    "Gather Peacefully": { shorthand: "1 (I)", full: "1st Amendment" },
    "Challenge Power": { shorthand: "1 (I)", full: "1st Amendment" },
    "Own Arms": { shorthand: "2 (II)", full: "2nd Amendment" },
    "No Forced Lodging": { shorthand: "3 (III)", full: "3rd Amendment" },
    "Privacy at Home": { shorthand: "4 (IV)", full: "4th Amendment" },
    "Warrants Only": { shorthand: "4 (IV)", full: "4th Amendment" },
    "Fair Process (Federal)": { shorthand: "5 (V)", full: "5th Amendment" },
    "Stay Silent": { shorthand: "5 (V)", full: "5th Amendment" },
    "One Trial Only": { shorthand: "5 (V)", full: "5th Amendment" },
    "Pay for What You Take": { shorthand: "5 (V)", full: "5th Amendment" },
    "Grand Jury First": { shorthand: "5 (V)", full: "5th Amendment" },
    "Fast Trial": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Public Trial": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Unbiased Jury": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Know the Charge": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Face Accusers": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Call Witnesses": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Right to Lawyer": { shorthand: "6 (VI)", full: "6th Amendment" },
    "Jury for Civil": { shorthand: "7 (VII)", full: "7th Amendment" },
    "No Excessive Bail": { shorthand: "8 (VIII)", full: "8th Amendment" },
    "No Cruel Punishment": { shorthand: "8 (VIII)", full: "8th Amendment" },
    "More Rights Exist": { shorthand: "9 (IX)", full: "9th Amendment" },
    "States Hold Power": { shorthand: "10 (X)", full: "10th Amendment" },
    "Can’t Sue States Easily": { shorthand: "11 (XI)", full: "11th Amendment" },
    "Clear Elections": { shorthand: "12 (XII)", full: "12th Amendment" },
    "Slavery Ends": { shorthand: "13 (XIII)", full: "13th Amendment" },
    "Born = Citizen": { shorthand: "14 (XIV)", full: "14th Amendment" },
    "Fair Process (States)": { shorthand: "14 (XIV)", full: "14th Amendment" },
    "States Must Be Fair": { shorthand: "14 (XIV)", full: "14th Amendment" },
    "Rights Apply Nationwide": { shorthand: "14 (XIV)", full: "14th Amendment" },
    "Vote Regardless of Race": { shorthand: "15 (XV)", full: "15th Amendment" },
    "Income Tax Legal": { shorthand: "16 (XVI)", full: "16th Amendment" },
    "Senators by Vote": { shorthand: "17 (XVII)", full: "17th Amendment" },
    "No Alcohol": { shorthand: "18 (XVIII)", full: "18th Amendment" },
    "Women Can Vote": { shorthand: "19 (XIX)", full: "19th Amendment" },
    "Inauguration Reset": { shorthand: "20 (XX)", full: "20th Amendment" },
    "Alcohol Repealed": { shorthand: "21 (XXI)", full: "21st Amendment" },
    "2-Term Max": { shorthand: "22 (XXII)", full: "22nd Amendment" },
    "D.C. Votes Too": { shorthand: "23 (XXIII)", full: "23rd Amendment" },
    "No Poll Taxes": { shorthand: "24 (XXIV)", full: "24th Amendment" },
    "Succession Plan": { shorthand: "25 (XXV)", full: "25th Amendment" },
    "Vote at 18": { shorthand: "26 (XXVI)", full: "26th Amendment" },
    "No Instant Raises": { shorthand: "27 (XXVII)", full: "27th Amendment" }
  };

  const SUBJECT_LOOKUP_RANGE = "the_constitution!F2:G100";

async function fetchSubjectMap() {
  const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${SUBJECT_LOOKUP_RANGE}?key=${API_KEY}`;
  const res = await fetch(url);
  const json = await res.json();
  return json.values || [];
}

// --- Founding Text/Amendment dropdown logic unchanged above ---

// --- Rights dropdown logic with auto-select for founding text ---
function initRightsDropdown() {
  const rightsDropdown = document.getElementById("subject-quick");
  const output = document.getElementById("subject-quick-output");
  // Don't re-initialize if already has options
  if (rightsDropdown.options.length > 1) return;
  // Use the hardcoded map keys for rights
  Object.keys(rightToAmendmentMap).forEach(right => {
    const opt = document.createElement("option");
    opt.value = right;
    opt.textContent = right;
    rightsDropdown.appendChild(opt);
  });

  rightsDropdown.addEventListener("change", () => {
    const selectedRight = rightsDropdown.value;
    const amendmentObj = rightToAmendmentMap[selectedRight];
    // 👉 This is the Rights font — shown when a user selects a right from the first dropdown
    output.innerHTML = amendmentObj
      ? `<div class="founding-text-box" style="font-family: 'Dancing Script', cursive; font-size: 1.2rem; font-weight: 600; color: #000;">→ Amendment: ${amendmentObj.shorthand}</div>`
      : "";

    // Always update the founding text dropdown to match the right's amendment
    const matchingAmendment = amendmentObj?.full;
    const foundingTextDropdown = document.getElementById("subject-select");
    if (matchingAmendment) {
      for (let i = 0; i < foundingTextDropdown.options.length; i++) {
        if (foundingTextDropdown.options[i].textContent.trim() === matchingAmendment) {
          foundingTextDropdown.selectedIndex = i;
          foundingTextDropdown.dispatchEvent(new Event("change"));
          break;
        }
      }
    }
  });
}

  window.addEventListener("DOMContentLoaded", () => {
    initAmendmentDropdown();
    initRightsDropdown();
    // No longer auto-select rights dropdown when founding text is changed.
    // Remove logic that updates rights dropdown based on founding text selection.
  });

  // Close mobile menu when clicking outside of it
  document.addEventListener("click", function(event) {
    const navMenu = document.getElementById("navMenu");
    const menuToggle = document.querySelector(".menu-toggle");
    const isClickInsideMenu = navMenu.contains(event.target);
    const isClickOnToggle = menuToggle.contains(event.target);

    if (!isClickInsideMenu && !isClickOnToggle && navMenu.classList.contains("show")) {
      navMenu.classList.remove("show");
    }
  });

  // Remove event listener that sets dataset.userSelected on founding text dropdown

  function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("show");
  }
  // Remove any insightSection flex logic if present (none here, but placeholder for future)
</script>
</script>
</body>
</html>
</style>
</style>
<style>
/* 🔹 Strategic intro box */
.strategic-intro-box {
  border: 2px solid #C4A000;
  background-color: rgba(255, 255, 255, 0.85);
  border-radius: 12px;
  padding: 1.25rem;
  margin: 0 auto 2rem auto;
  max-width: 800px;
  text-align: center;
  font-family: 'Times New Roman', serif;
  box-shadow: 0 0 10px rgba(196, 160, 0, 0.2);
}
