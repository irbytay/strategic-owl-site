<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ðŸŒ Meta Setup -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Strategic Owl</title>

  <!-- ðŸ…° Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />

  <!-- ðŸŽ¨ Style Block -->
  <style>
    /* ðŸŽ¨ Color Scheme Variables */
    :root {
      --navy: #1A1A40;
      --gold: #FFD700;
      --truth: #32CD32;
      --reliability: #3B6CED;
      --understanding: #D4AF37;
      --text: #FAFAD2;
      --dark-gray: #2C3E50;
    }

    /* ðŸ§¼ Reset + Typography */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--navy);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      padding: 0;
      margin: 0;
    }

    /* ðŸ§­ Top Navigation */
    nav {
      background-color: var(--dark-gray);
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-title {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      color: var(--gold);
    }

    .nav-links a {
      margin-left: 12px;
      color: var(--text);
      text-decoration: none;
      font-size: 14px;
    }

    .nav-links a:hover {
      color: var(--gold);
    }

    /* ðŸ“¦ Page Container */
    #page-content {
      padding: 16px;
    }

    /* ðŸ“± Mobile Optimization */
    @media (min-width: 768px) {
      .nav-links a {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

  <!-- ðŸ§­ Navigation -->
  <nav>
    <div class="nav-title">The Strategic Owl</div>
    <div class="nav-links">
      <a href="#home" onclick="loadPage('home.html')">Home</a>
      <a href="#score" onclick="loadPage('score.html')">Scores</a>
      <a href="#states" onclick="loadPage('states.html')">States</a>
      <a href="#about" onclick="loadPage('about.html')">About</a>
    </div>
  </nav>

  <!-- ðŸ”„ Dynamic Content Placeholder -->
  <main id="page-content">
    <!-- Content will be loaded here by SPA script -->
    <p style="padding: 20px;">Loading...</p>
  </main>

  <!-- ðŸ§  SPA Script Logic -->
 <script>
  function loadPage(page, push = true) {
    fetch(page)
      .then(res => {
        if (!res.ok) throw new Error(`Failed to load ${page}`);
        return res.text();
      })
      .then(html => {
        const content = document.getElementById("page-content");

        // Parse HTML content in a temporary container
        const temp = document.createElement("div");
        temp.innerHTML = html;

        // Extract and remove <script> tags
        const scripts = Array.from(temp.querySelectorAll("script"));
        scripts.forEach(script => script.remove());

        // Inject remaining HTML
        content.innerHTML = temp.innerHTML;

        // Re-execute extracted scripts
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          if (oldScript.src) {
            newScript.src = oldScript.src;
            newScript.defer = oldScript.defer || false;
            newScript.async = oldScript.async || false;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          document.body.appendChild(newScript);
        });

        // Update browser history
        if (push) {
          history.pushState({ page }, "", "#" + page);
        }
      })
      .catch(err => {
        document.getElementById("page-content").innerHTML = "<p>Error loading content.</p>";
        console.error(err);
      });
  }

  // Load correct page on refresh or direct link
  window.addEventListener("load", () => {
    const defaultPage = "home.html";
    const hash = window.location.hash.slice(1).replace(".html", "");
    loadPage(hash ? `${hash}.html` : defaultPage, false);
  });

  // Handle back/forward button navigation
  window.addEventListener("popstate", e => {
    if (e.state?.page) {
      loadPage(e.state.page, false);
    }
  });
</script>

</body>
</html>
