<body>
  <!-- Navigation Bar -->
  <nav>
    <a href="#home" onclick="loadPage('home.html')">Home</a>
    <a href="#testing" onclick="loadPage('testing.html')">Testing</a>
  </nav>

  <!-- This is where page content gets loaded -->
  <div id="page-content"></div>

  <!-- Your SPA script loader -->
  <script>
    const scriptMap = {
      home: null,
      testing: "https://cdn.jsdelivr.net/gh/irbytay/strategic-owl-site@main/scripts/newTRUOWLscript.js"
    };

    function loadPage(page, push = true) {
      fetch(page)
        .then(res => {
          if (!res.ok) throw new Error(`Failed to load ${page}`);
          return res.text();
        })
        .then(html => {
          const content = document.getElementById("page-content");
          const temp = document.createElement("div");
          temp.innerHTML = html;

          // Strip inline scripts
          const inlineScripts = Array.from(temp.querySelectorAll("script"));
          inlineScripts.forEach(script => script.remove());
          content.innerHTML = temp.innerHTML;

          // Re-run inline scripts
          inlineScripts.forEach(oldScript => {
            const newScript = document.createElement("script");
            if (oldScript.src) newScript.src = oldScript.src;
            else newScript.textContent = oldScript.textContent;
            document.body.appendChild(newScript);
          });

          // Load external script from map
          const route = page.replace(".html", "");
          const extraScript = scriptMap[route];
          if (extraScript) {
            const s = document.createElement("script");
            s.src = extraScript;
            s.defer = true;
            document.body.appendChild(s);
          }

          if (push) history.pushState({ page }, "", "#" + page);
        })
        .catch(err => {
          document.getElementById("page-content").innerHTML = "<p>Error loading content.</p>";
          console.error(err);
        });
    }

    window.addEventListener("load", () => {
      const hash = window.location.hash.slice(1).replace(".html", "") || "home";
      loadPage(`${hash}.html`, false);
    });

    window.addEventListener("popstate", e => {
      if (e.state?.page) loadPage(e.state.page, false);
    });
  </script>
</body>
